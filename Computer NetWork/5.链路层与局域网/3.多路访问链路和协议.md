<!--
 * @Descripttion: 
 * @version: 
 * @Author: WangQing
 * @email: 2749374330@qq.com
 * @Date: 2019-12-05 14:37:38
 * @LastEditors: WangQing
 * @LastEditTime: 2019-12-05 16:01:41
 -->
# 多路访问链路和协议

## 两种链路

- 点到点链路
    - PPP/交换式以太网中交换机和主机之间的点到点链路
- 广播链路（共享线路或介质）
    - 传统以太网（共享以太网）

### 广播链路的特点

- 单个共享广播信道
- 两个或多个节点同时传输：相互干扰
    - 碰撞：一个节点同时收到两个或多个信号

## 多路访问协议

### 理想的多路访问协议

- 假定：信道为速率为R b/s的广播信道
- 当只有一个节点有数据发送时，该节点的吞吐量为R (**保证充分利用信道**)
- 当M个节点有数据发送时，每个节点吞吐量为R/M (**保证公平性**)
- 分散
    - 没有特定节点用于调整传输
    - 没有时钟同步
- 简单

### 信道划分协议

- TDMA
    - 循环访问信道
    - 每个节点在每次循环中得到固定长度的时隙（时隙长度＝传输单个分组时间）
    - 没有数据发送的时隙空闲
- FDMA
    - 信道按频谱分成若干频段
    - 每个节点分配固定频段
    - 在频段不用时该部分信道被闲置和浪费
- CDMA码分多址访问
    - 每个用户可以在同样的时间内用相同的频带进行通信。由于各用户使用经过特殊挑选的不同编码，因此不会造成干扰。这种通信信号具有很高的抗干扰能力。
    - 发送方发送的每个比特都通过乘以编码信号比特（编码片序列）进行编码
    - 每个用户被指派一个惟一的m bit码片序列
    - 所有用户共享相同的频道, 但每个用户用自己的“码片”序列对数据编码

### 随机划分访问协议

- 时隙ALOHA
    1. 所有帧正好由L比特组成
    2. 带宽为R，一帧传输时间 = L/R
    3. 以L/R为单位划分时隙
    4. 节点只在每个时隙的开始传输帧
    5. 节点时钟同步，因此每个节点知道时隙什么时候开始
    6. 如果一个节点发送的帧产生碰撞，该节点以概率p在
    后续的每个时隙重发该帧，直到该帧无碰撞地传输成功。
    7. 效率：Np*(1-p)^(N-1)

- CSMA
    - 传输前监听
        - 如果信道空闲，传送整个帧
        - 如果信道忙，推迟传送

- CSMA/CD

- 边传输边检测碰撞
- 发现碰撞后停止传输，减少信道浪费
- 碰撞检测
    在有线局域网中比较容易:测量信号强度，比较收、发的信号
    在无线局域网中比较困难: 传输时信号的衰减、多径反射

### CSMA分类

- 非坚持(nonpersistent)CSMA
    - 一旦监听到信道忙（即发现有其他站在发送数据），就不再坚持听下去，而是根据协议的算法延迟一个随机的时间后重新再监听。若进行载波监听时发现信道空闲，则将准备好的帧发送出去。
- 时隙非坚持CSMA
    - 采用划分时隙的随机接入CSMA协议，协议规定只能在每个时隙开始时才能发送帧。 
- 1坚持CSMA
    - 当一个站点要传送数据时，首先侦听信道，看是否有其他站点正在传送。如果信道正忙，它就持续等待直到它侦听到信道空闲时，便将数据送出。若发生冲突，站点就等待一个随机长的时间，然后重新开始。
- P坚持CSMA
    - 当一个站点要传送数据时，首先侦听信道，看是否有其他站点正在传送。如果信道正忙，它就监听直到它侦听到信道空闲时，以概率P发送数据，而以概率（1－P）延迟一段时间τ(网络中最远的端到端的传播时延)，重新监听信道。

## 轮流协议

### 转询协议

- 主节点邀请从节点轮流传输

### 令牌传递协议

- 控制令牌依次通过各个结点

## DOCSIS

- 通过FDM将上行和下行划分为多个信道
- 每个下行信道的吞吐量为40Mbps，为广播信道，但由于下行只有CMTS发生数据，因此不存在多路访问问题
    - CMTS 到调制解调器
- 每个上行信道的吞吐量在30 Mbps，为广播信道
    - 多路访问: 所有用户争夺特定的上游通道时隙
