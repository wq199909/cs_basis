<!--
 * @Descripttion: 
 * @version: 
 * @Author: WangQing
 * @email: 2749374330@qq.com
 * @Date: 2019-12-04 13:17:29
 * @LastEditors: WangQing
 * @LastEditTime: 2019-12-04 13:51:16
 -->
# 虚电路和数据报网络

## 网络层提供的服务

- 面向连接的服务：虚电路，需要事先握手
- 面向无连接的服务：数据报，无需握手

## 网络层与运输层相应服务的区别

- 网络层是向运输层提供主机到主机的服务，而运输层是向应用层提供进程到进程的服务
- 网络层仅提供上述两种服务的一种，不同时提供两种，而运输层则同时提供两种
- 运输层的服务在网络边缘的端系统中实现，而网络层的服务则在整个网络中实现，含路由器

## 虚电路

- 目标
    - 使收发双方之间的路径表现得如同电话线路一般
- 工作机制
    - 数据开始流动之前，呼叫建立：流动结束后要断开
    - 每一个分组携带虚电路的标识（而不是目的主机的地址）
    - **路径上的每一个路由器必须为进行中的连接维持连接状态信息**
        - 传输层的来连接仅涉及到两个端系统
    - 链路，路由器资源（带宽，缓冲区）可以分配给虚电路
        - 目的：为了达到类似于线路交换的性能
- 组成
    - 从源到目的主机的路径
    - VC号，沿着该路径的每段链路的一个号码
    - 沿着该路径的每台路由器中的转发表

## 数据报网络

- 在网络层没有连接建立过程
- 路由器：在端到端的连接中不维护连接状态信息
    - 在网络层不存在“联接”的概念
- 传输报文时使用目的的主机地址信息
    - 同一对主机间的报文可能会走不同的路径

## 最长前缀匹配

- 通过比较地址前缀进行转发，可以大大减小转发表的大小
- **最长前缀匹配原则：向与最长前缀匹配的链路接口转发**

## 虚电路VS数据报

- 虚电路网路：聪明的网路，愚笨的终端
- 数据报网路：简单的网路，复杂的终端
    - 互联不同类型的网路更加容易
    - 启用新服务的速度更快，更简单