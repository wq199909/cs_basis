<!--
 * @Descripttion: 
 * @version: 
 * @Author: WangQing
 * @email: 2749374330@qq.com
 * @Date: 2020-01-02 20:16:43
 * @LastEditors: WangQing
 * @LastEditTime: 2020-01-02 20:25:43
 -->
# 死锁

在两个或多个并发进程中，如果每个进程持有某种资源而又都等待着别的进程释放它或它们现在保持着的资源，否则就不能向前推进。此时，称这一组进程产生了死锁。

## 死锁原因

- 系统资源不足
- 进程推进顺序非法

## 产生死锁的必要条件

- 互斥条件
    - 涉及的资源是非共享的，即为临界资源。
- 不剥夺条件
    - 进程所获得的资源在未使用完毕之前，不能被其他进程强行夺走。
- 部分分配
    - 进程每次申请它所需要的一部分资源。在等待一新资源的同时，进程继续占用已分配到的资源。
- 环路条件
    - 存在一种进程的循环链，链中的每一个进程已获得的资源同时被链中下一个进程所请求。

## 死锁的预防

在作业调度时为选中的作业分配它所需要的所有资源，当资源一旦分配给该作业后，在其整个运行期间这些资源为它独占。

## 死锁的避免

**有序资源分配法**

系统中所有资源都给定一个唯一的编号，所有分配请求必须以上升的次序进行。当遵守上升次序的规则时，若资源可用，则予以分配；否则，请求者等待。（缺点：资源浪费！）

**银行家算法**

申请者事先说明对各类资源的最大需求量。在进程活动期间动态申请某类资源时，由系统审查现有该类资源的数目是否能满足当前进程的最大需求量，如能满足就予以分配，否则拒绝。
